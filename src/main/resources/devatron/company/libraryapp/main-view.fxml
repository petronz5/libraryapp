<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns:fx="http://javafx.com/fxml"
            fx:controller="devatron.company.libraryapp.MainController"
            prefHeight="800.0"
            prefWidth="1200.0"
            stylesheets="@styles.css">
    <!-- TOP BAR -->
    <top>
        <HBox spacing="10" styleClass="top-bar">
            <Label fx:id="lblSearch"
                   text="Search:"
                   styleClass="search-label"/>
            <TextField fx:id="txtSearch"
                       promptText="Cerca (ISBN/Titolo/Editore/Autore)"
                       styleClass="search-field"/>
            <Button fx:id="btnSearch"
                    text="Cerca"
                    onAction="#handleSearch"
                    styleClass="search-button"/>
            <Button fx:id="btnStats"
                    text="Statistiche"
                    onAction="#handleShowStatistics"
                    styleClass="stats-button"/>
            <Button fx:id="btnLoans"
                    text="Prestiti"
                    onAction="#handleShowLoans"
                    styleClass="loan-button"/>
            <Pane HBox.hgrow="ALWAYS"/>
            <ComboBox fx:id="localeCombo"
                      prefWidth="80"
                      promptText="Lingua"/>
            <Button fx:id="btnLogout"
                    text="Logout"
                    onAction="#handleLogout"
                    styleClass="logout-button"/>
        </HBox>
    </top>

    <!-- TABLE CENTER -->
    <center>
        <TableView fx:id="tableBooks">
            <columns>
                <TableColumn fx:id="colIsbn"      text="ISBN"      prefWidth="120"/>
                <TableColumn fx:id="colTitle"     text="Titolo"    prefWidth="200"/>
                <TableColumn fx:id="colPublisher" text="Editore"   prefWidth="150"/>
                <TableColumn fx:id="colAuthor"    text="Autore"    prefWidth="150"/>
                <TableColumn fx:id="colYear"      text="Anno"      prefWidth="70"/>
                <TableColumn fx:id="colPrice"     text="Prezzo"    prefWidth="70"/>
                <TableColumn fx:id="colGenre"     text="Genere"    prefWidth="100"/>
                <TableColumn fx:id="colQuantity"  text="Quantità"  prefWidth="80"/>
                <TableColumn fx:id="colSold"      text="Venduti"   prefWidth="80"/>
            </columns>
        </TableView>
    </center>

    <!-- BOTTOM FORM -->
    <bottom>
        <VBox spacing="10" BorderPane.alignment="CENTER">
            <padding>
                <Insets top="10" bottom="10" left="10" right="10"/>
            </padding>
            <!-- Riga 1: ISBN e Titolo -->
            <HBox spacing="10">
                <Label fx:id="lblIsbn"/>
                <TextField fx:id="txtIsbn" promptText="Inserisci ISBN"/>
                <Label fx:id="lblTitle"/>
                <TextField fx:id="txtTitle" promptText="Inserisci titolo"/>
            </HBox>
            <!-- Riga 2: Editore e Autore -->
            <HBox spacing="10">
                <Label fx:id="lblPublisher"/>
                <TextField fx:id="txtPublisher" promptText="Inserisci editore"/>
                <Label fx:id="lblAuthor"/>
                <TextField fx:id="txtAuthor" promptText="Inserisci autore"/>
            </HBox>
            <!-- Riga 3: Anno e Prezzo -->
            <HBox spacing="10">
                <Label fx:id="lblYear"/>
                <Spinner fx:id="spYear" editable="true"/>
                <Label fx:id="lblPrice"/>
                <TextField fx:id="txtPrice" promptText="Es. 9.99"/>
            </HBox>
            <!-- Riga 4: Genere, Quantità e Venduti -->
            <HBox spacing="10">
                <Label fx:id="lblGenre"/>
                <ComboBox fx:id="comboGenre" promptText="Seleziona genere"/>
                <Label fx:id="lblQuantity"/>
                <TextField fx:id="txtQuantity" promptText="0"/>
                <Label fx:id="lblSold"/>
                <TextField fx:id="txtSold" promptText="0"/>
            </HBox>
            <!-- Riga 5: Bottoni di azione -->
            <HBox spacing="10" alignment="CENTER_RIGHT">
                <Button fx:id="btnAdd"    text="Aggiungi"    onAction="#handleAddBook"/>
                <Button fx:id="btnUpdate" text="Aggiorna"    onAction="#handleUpdateBook"/>
                <Button fx:id="btnDelete" text="Elimina"     onAction="#handleDeleteBook"/>
                <Button fx:id="btnClear"  text="Pulisci Campi" onAction="#handleClearFields"/>
                <Button fx:id="btnReload" text="Ricarica"    onAction="#loadBooks"/>
            </HBox>
        </VBox>
    </bottom>
</BorderPane>
